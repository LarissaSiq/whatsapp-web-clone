(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{61:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var c=a(12),s=a.n(c),n=a(45),r=a.n(n),i=a(0),o=a.n(i),l=a(1),d=a(13),u=(a(61),a(53)),j=a.n(u),h=a(54),b=a.n(h),f=a(38),m=a.n(f),v=a(37),p=a.n(v),O=(a(62),a(6));var x=function(e){var t=e.onClick,a=e.active,s=e.data,n=Object(c.useState)(""),r=Object(d.a)(n,2),i=r[0],o=r[1];return Object(c.useEffect)((function(){if(s.lastMessageDate>0){var e=new Date(1e3*s.lastMessageDate.seconds),t=e.getHours(),a=e.getMinutes();a=a<10?"0"+a:a,o("".concat(t=t<10?"0"+t:t,":").concat(a))}}),[s]),Object(O.jsxs)("div",{className:"chatListItem ".concat(a?"active":""),onClick:t,children:[Object(O.jsx)("img",{className:"chatListItem--avatar",src:s.image,alt:"user-avatar"}),Object(O.jsxs)("div",{className:"chatListItem--lines",children:[Object(O.jsxs)("div",{className:"chatListItem--line",children:[Object(O.jsx)("div",{className:"chatListItem--name",children:s.title}),Object(O.jsx)("div",{className:"chatListItem--date",children:i})]}),Object(O.jsx)("div",{className:"chatListItem--line",children:Object(O.jsx)("div",{className:"chatListItem--lastMsg",children:Object(O.jsx)("p",{children:s.lastMessage})})})]})]})};a(64);var g=function(){return Object(O.jsxs)("div",{className:"chatIntro",children:[Object(O.jsx)("img",{src:"https://conteudo.imguol.com.br/c/noticias/2015/01/23/logo-whatsapp-whatsapp-na-web-1422023070243_615x300.jpg",alt:""}),Object(O.jsx)("h1",{children:"Mantenha seu celular conectado."}),Object(O.jsxs)("h2",{children:["O Whatsapp conecta ao seu telefone para sincronizar suas mensagens.",Object(O.jsx)("br",{}),"Para reduzir o uso de dados, conecte seu telefone a uma rede Wi-Fi."]})]})},w=(a(65),a(48)),N=a.n(w),y=a(50),k=a.n(y),C=a(49),I=a.n(C),S=a(51),W=a.n(S),L=a(46),D=a.n(L);a(66);var M=function(e){var t=e.data,a=e.user,s=Object(c.useState)(""),n=Object(d.a)(s,2),r=n[0],i=n[1];return Object(c.useEffect)((function(){if(t.date>0){var e=new Date(1e3*t.date.seconds),a=e.getHours(),c=e.getMinutes();c=c<10?"0"+c:c,i("".concat(a=a<10?"0"+a:a,":").concat(c))}}),[t]),Object(O.jsx)("div",{className:"messageLine",style:{justifyContent:a.id===t.author?"flex-end":"flex-start"},children:Object(O.jsxs)("div",{className:"messageItem",style:{backgroundColor:a.id===t.author?"#DCF8C6":"#fff"},children:[Object(O.jsx)("div",{className:"messageText",children:t.body}),Object(O.jsx)("div",{className:"messageDate",children:r})]})})},E=a(17),U=a(27),H=(a(67),a(79),{apiKey:"AIzaSyDZSSDKsUSXWoRLGOHwUNHfmDom3wMFFE0",authDomain:"whatsapp-clone-larissasiq.firebaseapp.com",projectId:"whatsapp-clone-larissasiq",storageBucket:"whatsapp-clone-larissasiq.appspot.com",messagingSenderId:"401559125888",appId:"1:401559125888:web:8286f88ef64776b01dcb65"}),F=U.a.initializeApp(H).firestore(),G={googlePopUp:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new U.a.auth.GoogleAuthProvider,e.abrupt("return",U.a.auth().signInWithPopup(t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addUser:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.collection("users").doc(t.id).set({name:t.name,avatar:t.avatar},{merge:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getContactList:function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,F.collection("users").get();case 3:return e.sent.forEach((function(e){var c=e.data();e.id!==t&&a.push({id:e.id,name:c.name,avatar:c.avatar})})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addNewChat:function(){var e=Object(l.a)(o.a.mark((function e(t,a){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.collection("chats").add({messages:[],users:[t.id,a.id]});case 2:c=e.sent,F.collection("users").doc(t.id).update({chats:U.a.firestore.FieldValue.arrayUnion({chatId:c.id,title:a.name,image:a.avatar,with:a.id})}),F.collection("users").doc(a.id).update({chats:U.a.firestore.FieldValue.arrayUnion({chatId:c.id,title:t.name,image:t.avatar,with:t.id})});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),onChatList:function(e,t){return F.collection("users").doc(e).onSnapshot((function(e){if(e.exists){var a=e.data();if(a.chats){var c=Object(E.a)(a.chats);c.sort((function(e,t){return void 0===e.lastMessageDate||void 0===t.lastMessageDate?-1:e.lastMessageDate.seconds<t.lastMessageDate.seconds?1:-1})),t(c)}}}))},onChatContent:function(e,t,a){return F.collection("chats").doc(e).onSnapshot((function(e){if(e.exists){var c=e.data();t(c.messages),a(c.users)}}))},sendMessage:function(){var e=Object(l.a)(o.a.mark((function e(t,a,c,s,n){var r,i,l,d,u,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Date,F.collection("chats").doc(t.chatId).update({messages:U.a.firestore.FieldValue.arrayUnion({type:c,author:a,body:s,date:r})}),e.t0=o.a.keys(n);case 3:if((e.t1=e.t0()).done){e.next=16;break}return i=e.t1.value,e.next=7,F.collection("users").doc(n[i]).get();case 7:if(l=e.sent,!(d=l.data()).chats){e.next=14;break}for(j in u=Object(E.a)(d.chats))u[j].chatId===t.chatId&&(u[j].lastMessage=s,u[j].lastMessageDate=r);return e.next=14,F.collection("users").doc(n[i]).update({chats:u});case 14:e.next=3;break;case 16:case"end":return e.stop()}}),e)})));return function(t,a,c,s,n){return e.apply(this,arguments)}}()};var P=function(e){var t=e.user,a=e.data,s=Object(c.useRef)(),n=Object(c.useState)(!1),r=Object(d.a)(n,2),i=r[0],o=r[1],l=Object(c.useState)(""),u=Object(d.a)(l,2),j=u[0],h=u[1],b=Object(c.useState)([]),f=Object(d.a)(b,2),v=f[0],x=f[1],g=Object(c.useState)([]),w=Object(d.a)(g,2),y=w[0],C=w[1];Object(c.useEffect)((function(){return x([]),G.onChatContent(a.chatId,x,C)}),[a.chatId]),Object(c.useEffect)((function(){s.current.scrollHeight>s.current.offsetHeight&&(s.current.scrollTop=s.current.scrollHeight-s.current.offsetHeight)}),[v]);var S=function(){""!==j&&(G.sendMessage(a,t.id,"text",j,y),h(""),o(!1))};return Object(O.jsxs)("div",{className:"chatWindow",children:[Object(O.jsxs)("div",{className:"chatWindow--header",children:[Object(O.jsxs)("div",{className:"chatWindow--header--info",children:[Object(O.jsx)("img",{className:"chatWindow--avatar",src:a.image,alt:"user-avatar"}),Object(O.jsx)("div",{className:"chatWindow--name",children:a.title})]}),Object(O.jsxs)("div",{className:"chatWindow--header--btn",children:[Object(O.jsx)("div",{className:"chatWindow--btn",children:Object(O.jsx)(p.a,{style:{color:"919191"}})}),Object(O.jsx)("div",{className:"chatWindow--btn",children:Object(O.jsx)(N.a,{style:{color:"919191"}})}),Object(O.jsx)("div",{className:"chatWindow--btn",children:Object(O.jsx)(m.a,{style:{color:"919191"}})})]})]}),Object(O.jsx)("div",{ref:s,className:"chatWindow--body",children:v.map((function(e,a){return Object(O.jsx)(M,{data:e,user:t},a)}))}),Object(O.jsx)("div",{className:"chatWindow--emoji-area",style:{height:i?"200px":"0px"},children:Object(O.jsx)(D.a,{onEmojiClick:function(e,t){h(j+t.emoji)},disableSearchBar:!0,disableSkinTonePicker:!0})}),Object(O.jsxs)("div",{className:"chatWindow--footer",children:[Object(O.jsxs)("div",{className:"chatWindow--pre",children:[Object(O.jsx)("div",{className:"chatWindow--btn",onClick:function(){o(!1)},style:{width:i?40:0},children:Object(O.jsx)(I.a,{style:{color:"#919191"}})}),Object(O.jsx)("div",{className:"chatWindow--btn",onClick:function(){o(!0)},children:Object(O.jsx)(k.a,{style:{color:i?"#009688":"#919191"}})})]}),Object(O.jsx)("div",{className:"chatWindow--input--area",children:Object(O.jsx)("input",{className:"chatWindow--input",value:j,onChange:function(e){return h(e.target.value)},onKeyUp:function(e){13===e.keyCode&&S()},type:"text",placeholder:"Digite uma mensagem"})}),Object(O.jsx)("div",{className:"chatWindow--pos",children:Object(O.jsx)("div",{className:"chatWindow--btn",children:Object(O.jsx)(W.a,{onClick:S,style:{color:"#919191"}})})})]})]})},q=(a(75),a(52)),z=a.n(q);var R=function(e){var t=e.user,a=(e.chatlist,e.show),s=e.setShow,n=Object(c.useState)([]),r=Object(d.a)(n,2),i=r[0],u=r[1];Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t){e.next=5;break}return e.next=3,G.getContactList(t.id);case 3:a=e.sent,u(a);case 5:case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(c.useEffect)((function(){}),[i]);var j=function(){var e=Object(l.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.addNewChat(t,a);case 2:h();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){s(!1)};return Object(O.jsxs)("div",{className:"newChat",style:{left:a?0:-415},children:[Object(O.jsxs)("div",{className:"newChat--head",children:[Object(O.jsx)("div",{onClick:h,className:"newChat--backbutton",children:Object(O.jsx)(z.a,{style:{color:"fff"}})}),Object(O.jsx)("div",{className:"newChat--headtitle",children:"Nova Conversa"})]}),Object(O.jsx)("div",{className:"newChat--list",children:i.map((function(e,t){return Object(O.jsxs)("div",{onClick:function(){return j(e)},className:"newChat--item",children:[Object(O.jsx)("img",{className:"newChat--item--avatar",src:e.avatar,alt:"user-avatar"}),Object(O.jsx)("div",{className:"newChat--item--name",children:e.name})]},t)}))})]})};a(76);var _=function(e){var t=e.onReceive,a=function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.googlePopUp();case 2:(a=e.sent)?t(a.user):alert("Error!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"login",children:[Object(O.jsxs)("div",{className:"login--form-container",children:[Object(O.jsx)("h1",{className:"login--h1",children:"Whatsapp Web"}),Object(O.jsx)("fieldset",{className:"login--fieldset",children:Object(O.jsxs)("button",{className:"login--btn",onClick:a,children:[Object(O.jsx)("img",{className:"logo-google",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/25px-Google_%22G%22_Logo.svg.png",alt:"img-google"}),"Entre com uma conta Google"]})})]}),Object(O.jsx)("footer",{children:Object(O.jsxs)("p",{children:["copyright @2021 | feito por ",Object(O.jsx)("a",{className:"link",href:"https://github.com/LarissaSiq",target:"blank",children:"Larissa Siqueira"})]})})]})};var A=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)({}),r=Object(d.a)(n,2),i=r[0],u=r[1],h=Object(c.useState)(null),f=Object(d.a)(h,2),v=f[0],w=f[1],N=Object(c.useState)(!1),y=Object(d.a)(N,2),k=y[0],C=y[1];Object(c.useEffect)((function(){if(null!==v)return G.onChatList(v.id,s)}),[v]);var I=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t.uid,name:t.displayName,avatar:t.photoURL},e.next=3,G.addUser(a);case 3:w(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===v?Object(O.jsx)(_,{onReceive:I}):Object(O.jsxs)("div",{className:"app-window",children:[Object(O.jsxs)("div",{className:"sidebar",children:[Object(O.jsx)(R,{chatlist:a,user:v,show:k,setShow:C}),Object(O.jsxs)("header",{children:[Object(O.jsx)("img",{className:"header--avatar",src:v.avatar,alt:"user-avatar"}),Object(O.jsxs)("div",{className:"header--btn",children:[Object(O.jsx)("div",{className:"header--btn--area",children:Object(O.jsx)(j.a,{style:{color:"#919191"}})}),Object(O.jsx)("div",{onClick:function(){C(!0)},className:"header--btn--area",children:Object(O.jsx)(b.a,{style:{color:"#919191"}})}),Object(O.jsx)("div",{className:"header--btn--area",children:Object(O.jsx)(m.a,{style:{color:"#919191"}})})]})]}),Object(O.jsx)("div",{className:"search",children:Object(O.jsxs)("div",{className:"search--input",children:[Object(O.jsx)(p.a,{style:{color:"#919191",fontSize:"24px"}}),Object(O.jsx)("input",{type:"search",placeholder:"Procurar ou come\xe7ar uma nova conversa"})]})}),Object(O.jsx)("div",{className:"chatlist",children:a.map((function(e,t){return Object(O.jsx)(x,{data:e,active:i.chatId===a[t].chatId,onClick:function(){return u(a[t])}},t)}))})]}),Object(O.jsxs)("div",{className:"content-area",children:[void 0!==i.chatId&&Object(O.jsx)(P,{user:v,data:i}),void 0===i.chatId&&Object(O.jsx)(g,{})]})]})};r.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(A,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.c94c6601.chunk.js.map